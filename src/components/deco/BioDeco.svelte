<script lang="ts">
	import { onDestroy, onMount } from 'svelte';
	import globalStyle from '../../stores/globalStyles';
	let lglobalStyles = $globalStyle;
	globalStyle.subscribe((gs) => {
		lglobalStyles = gs;
	});
	let height = '5vh';
	let width = '5vh';
	let left = 'auto';
	let top = 'auto';
	let style = '';
	let color = lglobalStyles.activeColor;

	let random: number[] = [];
	let interval;
	onMount(() => {
		interval = setInterval(() => {
			random = [];
			for (let ix = 0; ix < 10; ix++) {
				random.push(Math.random());
			}
		}, 400);
	});

	onDestroy(() => {
		if (interval !== undefined) {
			clearInterval(interval);
		}
	});

	export { height, width, left, top, style, color };
</script>

<svg
	{width}
	{height}
	style="position: absolute; top: {top}; left: {left}; {style}"
	viewBox="0 0 259 485"
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
>
	<circle cx="110" cy="241" stroke-opacity={random[1]} r="109" stroke={color} stroke-width="2" />
	<mask id="path-2-inside-1_103_123" fill="white">
		<path
			d="M221 151C221 179.91 209.619 207.657 189.319 228.241C169.019 248.824 141.432 260.589 112.525 260.989C83.6182 261.39 55.7155 250.395 34.8526 230.382C13.9897 210.37 1.84383 182.948 1.04229 154.05L3.33395 153.986C4.11879 182.283 16.0115 209.132 36.4396 228.728C56.8677 248.324 84.1889 259.09 112.493 258.697C140.798 258.305 167.81 246.785 187.687 226.631C207.564 206.476 218.707 179.307 218.707 151H221Z"
		/>
	</mask>
	<path
		d="M221 151C221 179.91 209.619 207.657 189.319 228.241C169.019 248.824 141.432 260.589 112.525 260.989C83.6182 261.39 55.7155 250.395 34.8526 230.382C13.9897 210.37 1.84383 182.948 1.04229 154.05L3.33395 153.986C4.11879 182.283 16.0115 209.132 36.4396 228.728C56.8677 248.324 84.1889 259.09 112.493 258.697C140.798 258.305 167.81 246.785 187.687 226.631C207.564 206.476 218.707 179.307 218.707 151H221Z"
		stroke-opacity={random[2]}
		stroke={color}
		stroke-width="4"
		mask="url(#path-2-inside-1_103_123)"
	/>
	<mask id="path-3-inside-2_103_123" fill="white">
		<path
			d="M39 275C39 259.825 42.1398 244.814 48.222 230.912C54.3041 217.009 63.1971 204.515 74.3416 194.216C85.4861 183.916 98.6411 176.034 112.979 171.065C127.318 166.096 142.529 164.147 157.657 165.341L157.476 167.627C142.664 166.457 127.769 168.365 113.73 173.231C99.6906 178.097 86.8098 185.814 75.8976 195.899C64.9853 205.984 56.2777 218.218 50.3223 231.83C44.3669 245.443 41.2925 260.141 41.2925 275H39Z"
		/>
	</mask>
	<path
		d="M39 275C39 259.825 42.1398 244.814 48.222 230.912C54.3041 217.009 63.1971 204.515 74.3416 194.216C85.4861 183.916 98.6411 176.034 112.979 171.065C127.318 166.096 142.529 164.147 157.657 165.341L157.476 167.627C142.664 166.457 127.769 168.365 113.73 173.231C99.6906 178.097 86.8098 185.814 75.8976 195.899C64.9853 205.984 56.2777 218.218 50.3223 231.83C44.3669 245.443 41.2925 260.141 41.2925 275H39Z"
		stroke-opacity={random[3]}
		stroke={color}
		stroke-width="4"
		mask="url(#path-3-inside-2_103_123)"
	/>
	<mask id="path-4-inside-3_103_123" fill="white">
		<path
			d="M77 287.5C77 276.533 79.2692 265.684 83.665 255.636C88.0607 245.588 94.4879 236.559 102.542 229.115C110.597 221.671 120.104 215.975 130.467 212.383C140.829 208.792 151.823 207.383 162.756 208.247L162.626 209.898C151.921 209.053 141.156 210.432 131.009 213.949C120.863 217.465 111.553 223.043 103.667 230.332C95.7803 237.62 89.4871 246.462 85.1829 256.3C80.8788 266.139 78.6569 276.761 78.6569 287.5H77Z"
		/>
	</mask>
	<path
		d="M77 287.5C77 276.533 79.2692 265.684 83.665 255.636C88.0607 245.588 94.4879 236.559 102.542 229.115C110.597 221.671 120.104 215.975 130.467 212.383C140.829 208.792 151.823 207.383 162.756 208.247L162.626 209.898C151.921 209.053 141.156 210.432 131.009 213.949C120.863 217.465 111.553 223.043 103.667 230.332C95.7803 237.62 89.4871 246.462 85.1829 256.3C80.8788 266.139 78.6569 276.761 78.6569 287.5H77Z"
		stroke-opacity={random[4]}
		stroke={color}
		stroke-width="4"
		mask="url(#path-4-inside-3_103_123)"
	/>
	<rect x="110" width="2" height="485" fill={color} />
</svg>
<style>
	path,
	rect,
	circle {
		transition: all linear 0.4s;
	}
</style>
